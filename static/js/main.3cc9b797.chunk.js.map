{"version":3,"sources":["components/App/styles.module.css","components/ImageGalleryItem/styles.module.css","components/Modal/styles.module.css","components/ImageGallery/styles.module.css","components/Button/styles.module.css","components/Loader/styles.module.css","components/SearchBar/index.jsx","components/ImageGallery/index.jsx","components/ImageGalleryItem/index.jsx","components/Button/index.jsx","components/Modal/index.jsx","components/services/image-api.js","components/Loader/index.jsx","components/App/App.js","index.js","components/SearchBar/styles.module.css"],"names":["module","exports","SearchBar","state","query","inputHandler","event","setState","target","value","formSubmitHandler","preventDefault","props","onSubmit","className","Searchbar","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGallery","ImageGalleryStyle","children","ImageGalleryItem","id","ImageGalleryItemStyle","src","url","alt","ImageGalleryItemImage","onClick","modalUrl","Button","ButtonStyle","modalRoot","document","getElementById","Modal","toggleModalHandler","currentTarget","code","window","addEventListener","removeEventListener","createPortal","Overlay","ModalStyle","axios","defaults","baseURL","fetchImages","perPage","page","get","then","response","data","LoaderApp","loader","color","height","width","visible","INITIAL_STATE","images","modalImage","isLoading","modalShow","error","App","formSubmit","getImagesHandler","hits","growthArrayOfImages","catch","console","log","finally","ImageItemClickHandler","ItemUrl","toggleModal","listRef","React","createRef","prevProps","prevState","length","list","current","scrollHeight","scrollTop","PrevProps","snapshot","scrollTo","top","behavior","willBeButtonShow","AppStyle","ref","errorMessage","map","webformatURL","largeImageURL","Loader","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3cc9b797.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"AppStyle\":\"styles_AppStyle__3lUZN\",\"errorMessage\":\"styles_errorMessage__1nbn7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItemStyle\":\"styles_ImageGalleryItemStyle__UPw1j\",\"ImageGalleryItemImage\":\"styles_ImageGalleryItemImage__2xgsP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"styles_Overlay__36hqC\",\"ModalStyle\":\"styles_ModalStyle__3Y4eX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryStyle\":\"styles_ImageGalleryStyle__zaXNQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonStyle\":\"styles_ButtonStyle__3xg8s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"styles_loader__2ZQdl\"};","import { Component } from \"react\";\r\nimport {\r\n  Searchbar,\r\n  SearchForm,\r\n  SearchFormButton,\r\n  SearchFormButtonLabel,\r\n  SearchFormInput,\r\n} from \"./styles.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n// const INITIAL_STATE = {\r\n//   query: \"\",\r\n// };\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n  inputHandler = (event) => {\r\n    this.setState({ query: event.target.value });\r\n  };\r\n  formSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state);\r\n    // this.reset();\r\n  };\r\n  //   reset() {\r\n  //     this.setState({ ...INITIAL_STATE });\r\n  //   }\r\n\r\n  render() {\r\n    return (\r\n      <header className={Searchbar}>\r\n        <form className={SearchForm} onSubmit={this.formSubmitHandler}>\r\n          <button type=\"submit\" className={SearchFormButton}>\r\n            <span className={SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.inputHandler}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nSearchBar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default SearchBar;\r\n","import { Component } from \"react\";\r\nimport { ImageGalleryStyle } from \"./styles.module.css\";\r\nimport PropTypes from \"prop-types\";\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    return <ul className={ImageGalleryStyle}>{this.props.children}</ul>;\r\n  }\r\n}\r\nImageGallery.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\nexport default ImageGallery;\r\n","import { Component } from \"react\";\r\nimport {\r\n  ImageGalleryItemStyle,\r\n  ImageGalleryItemImage,\r\n} from \"./styles.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleryItem extends Component {\r\n  render() {\r\n    return (\r\n      <li id={this.props.id} className={ImageGalleryItemStyle}>\r\n        <img\r\n          src={this.props.url}\r\n          alt={this.props.url}\r\n          className={ImageGalleryItemImage}\r\n          // data-set={this.props.modalUrl}\r\n          onClick={() => this.props.onClick(this.props.modalUrl)}\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  modalUrl: PropTypes.string.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGalleryItem;\r\n","import { Component } from \"react\";\r\nimport { ButtonStyle } from \"./styles.module.css\";\r\nimport PropTypes from \"prop-types\";\r\nclass Button extends Component {\r\n  render() {\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={ButtonStyle}\r\n        onClick={() => this.props.onClick()}\r\n      >\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\nexport default Button;\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ModalStyle, Overlay } from \"./styles.module.css\";\r\nimport PropTypes from \"prop-types\";\r\nconst modalRoot = document.getElementById(\"modal-root\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.toggleModalHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.toggleModalHandler);\r\n  }\r\n  toggleModalHandler = (event) => {\r\n    // console.log(\"toggleModalActivate\");\r\n    if (event.target === event.currentTarget) {\r\n      this.props.onClick();\r\n    }\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClick();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className={Overlay} onClick={this.toggleModalHandler}>\r\n        <div className={ModalStyle}>\r\n          <img src={this.props.url} alt={this.props.url} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n};\r\nexport default Modal;\r\n","import axios from \"axios\";\r\n\r\nconst AUTH_TOKEN = \"19923655-1a3b53a89179877892e074405\";\r\n// const path = \"https://pixabay.com/api\";\r\nconst filter = \"image_type=photo&orientation=horizontal\";\r\naxios.defaults.baseURL = \"https://pixabay.com/api\";\r\n\r\nconst fetchImages = ({ query, perPage, page }) => {\r\n  return axios\r\n    .get(\r\n      `/?key=${AUTH_TOKEN}&q=${query}&${filter}&per_page=${perPage}&page=${page}`\r\n    )\r\n    .then((response) => {\r\n      //   console.dir(response);\r\n      return response.data;\r\n    });\r\n};\r\n\r\nexport default fetchImages;\r\n","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Component } from \"react\";\r\nimport { loader } from \"./styles.module.css\";\r\nclass LoaderApp extends Component {\r\n  render() {\r\n    return (\r\n      <div className={loader}>\r\n        <Loader\r\n          type=\"TailSpin\"\r\n          color=\"#3f51b5\"\r\n          height={40}\r\n          width={40}\r\n          visible={true}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LoaderApp;\r\n","import { AppStyle, errorMessage } from \"./styles.module.css\";\nimport React, { Component } from \"react\";\nimport SearchBar from \"../SearchBar\";\nimport ImageGallery from \"../ImageGallery\";\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport Button from \"../Button\";\nimport Modal from \"../Modal\";\nimport fetchImages from \"../services/image-api\";\nimport LoaderApp from \"../Loader\";\n\nconst INITIAL_STATE = {\n  query: \"\",\n  images: [],\n  perPage: 9,\n  page: 1,\n  modalImage: \"\",\n  isLoading: false,\n  modalShow: false,\n  error: \"\",\n};\nclass App extends Component {\n  constructor() {\n    super();\n    this.listRef = React.createRef();\n  }\n  state = {\n    ...INITIAL_STATE,\n  };\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    // Добавляются ли в список новые элементы?\n    // Запоминаем значение прокрутки, чтобы использовать его позже.\n    if (prevState.images.length < this.state.images.length) {\n      const list = this.listRef.current;\n      return list.scrollHeight - list.scrollTop;\n    }\n    return null;\n  }\n\n  componentDidUpdate(PrevProps, { query }, snapshot) {\n    if (this.state.query !== query) {\n      // console.log(\"componentDidUpdate state change?=\", query !== one);\n      this.setState({ isLoading: true });\n      fetchImages(this.state)\n        .then(({ hits }) => {\n          this.growthArrayOfImages(hits);\n          // this.setState({\n          //   images: [...this.state.images, ...hits],\n          //   page: this.state.page + 1,\n          // });\n        })\n        .catch((error) => {\n          console.log(\"error\", error);\n          this.setState({ error: true });\n        })\n        .finally(() => this.setState({ isLoading: false }));\n    }\n\n    if (snapshot !== null) {\n      window.scrollTo({\n        top: snapshot - 170,\n        behavior: \"smooth\",\n      });\n    }\n  }\n\n  growthArrayOfImages(hits) {\n    this.setState({\n      images: [...this.state.images, ...hits],\n      page: this.state.page + 1,\n    });\n  }\n\n  formSubmit = ({ query }) => {\n    if (this.state.query !== query) {\n      this.setState({\n        ...INITIAL_STATE,\n        query: query,\n      });\n    }\n  };\n\n  getImagesHandler = () => {\n    // console.log(\"button pressed\");\n    this.setState({ isLoading: true });\n    fetchImages(this.state)\n      .then(({ hits }) => {\n        this.growthArrayOfImages(hits);\n        // this.setState({\n        //   images: [...this.state.images, ...hits],\n        //   page: this.state.page + 1,\n        // });\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ error: true });\n      })\n      .finally(() => this.setState({ isLoading: false }));\n  };\n  ImageItemClickHandler = (ItemUrl) => {\n    this.setState({ modalImage: ItemUrl });\n    this.toggleModal();\n  };\n  toggleModal = () => {\n    this.setState(({ modalShow }) => ({ modalShow: !modalShow }));\n  };\n  render() {\n    const { error, images, isLoading, modalShow, modalImage } = this.state;\n    const willBeButtonShow = images.length > 0 && !isLoading && !error;\n\n    return (\n      <div className={AppStyle} ref={this.listRef}>\n        <SearchBar onSubmit={this.formSubmit} />\n        {error && (\n          <p className={errorMessage}>\n            Oops, there was an unexpected error, please try again.\n          </p>\n        )}\n        <ImageGallery>\n          {images.map(({ id, webformatURL, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              id={id}\n              url={webformatURL}\n              modalUrl={largeImageURL}\n              onClick={this.ImageItemClickHandler}\n            />\n          ))}\n        </ImageGallery>\n        {isLoading && <LoaderApp />}\n        {willBeButtonShow && <Button onClick={this.getImagesHandler} />}\n        {modalShow && <Modal url={modalImage} onClick={this.toggleModal} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./styles.css\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"styles_Searchbar__27lKD\",\"SearchForm\":\"styles_SearchForm__2asYX\",\"SearchFormButton\":\"styles_SearchFormButton__2v1z8\",\"SearchFormButtonLabel\":\"styles_SearchFormButtonLabel__2nkfm\",\"SearchFormInput\":\"styles_SearchFormInput__12DXh\"};"],"sourceRoot":""}